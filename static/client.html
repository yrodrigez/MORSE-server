<html>
<head></head>
<body>
<script type="text/javascript">
    var webSocket = null;
    var websocketURI = "ws://127.0.0.1";

    window.onload = function () {

        console.log("onload");

        webSocket = new WebSocket(websocketURI);

        webSocket.onopen = function () {
            console.log("connected to " + webSocket.url);
        };

        webSocket.onclose = function (e) {
            console.log("connection closed (" + e.code + ")");
        };

        webSocket.onmessage = function (e) {
            console.log("message received: " + e.data);
            var liNode = document.createElement("LI");
            var textNode = document.createTextNode(e.data+"\n");
            liNode.appendChild(textNode);

            document.getElementById('messages').appendChild(
                textNode
            );
        };

        var messageBox = document.getElementById( 'message' );

        messageBox.addEventListener( 'click', function () {
          if( this.value.match(/Write your message...$/) ){
              this.value = "";
              this.style.color = "black";
          }

        });

        messageBox.addEventListener( 'blur', function () {
            if( this.value === "" ) {
                this.value = "Write your message...";
                this.style.color = "#6a6a6a";
            }
        });

        messageBox.addEventListener( 'keyup', function (event) {
            if( event.keyCode === 13){
                send();
                this.value = "";
            }

        });
    };

    function send() {
        var messageBox = document.getElementById( 'message' );
        if ( messageBox.value === "" || messageBox.value.match(/Write your message...$/) ){
            alert( 'write something!' );
        } else {
            var msg = messageBox.value;
            webSocket.send(msg);
        }
    }
</script>
<h1>Morse</h1>
<img width="50" height="50" src="https://github.com/yrodrigez/MORSE/raw/master/MORSE.png"/>
<br/>
<label for="messages"></label>
<textarea style="resize: none" id="messages" readonly rows="30" cols="80"></textarea>
<br/>

Message: <label for="message"></label>
<br/>
<input id="message" type="text" size="30" value="Write your message..." style="color: #6a6a6a">
<br/>
<button onclick="send();">Send Message</button>
</body>
</html>